!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){return e.classList.contains(t)}function i(e,t){let n=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;for(;e&&!n.call(e,t);)e=e.parentElement;return e}n.r(t),n(2);class c{constructor(e){this.options=Object.assign({},c.DEFAULTS,e),this.containerEl=document.querySelector(e.el),this._eventBind=this._eventBind.bind(this),this._init()}static get DEFAULTS(){return{el:"",nodes:[],checkbox:!0,accordion:!0,onCheck:function(){},onExpand:function(){}}}_init(){return this.configs=this._setPath(this.options.nodes),this._creatDom(),this.configs=this._getPath(this.configs),this.treeEl.addEventListener("click",this._eventBind),this}_creatDom(){let e=this,t=function t(n){return n.map(n=>`\n          <li class="tree-parent${n.expanded?" expanded":""}">\n            <div class="tree-text">\n              ${n.children&&n.children.length>0?'<span class="tree-expanded"></span>':""}\n              ${e.options.checkbox?`\n                <span class="tree-checked">\n                  <input class="tree-checkbox" type="checkbox" data-tree-path="${n.path}" value="${n.value}" ${n.checked?" checked":""}>\n                </span>\n                `:""}\n              <span class="tree-label">${n.label}</span>\n            </div>\n            ${n.children&&n.children.length>0?`<ol> ${t(n.children)} </ol>`:""}\n          </li>\n        `).join("")}(this.configs);var n,r,i;n=this.containerEl,i=`<ol class="tree-el"> ${t} </ol>`,["beforebegin","afterbegin","beforeend","afterend"].includes(r="beforeend")&&n.insertAdjacentHTML(r,i),this.treeEl=this.containerEl.querySelector(".tree-el")}_eventBind(e){const t=e.target;r(t,"tree-expanded")?(this._expandedEvent(e),this.options.onExpand(e)):r(t,"tree-checkbox")&&(this._checkedEvent(e),this.options.onCheck(e))}_expandedEvent(e){const t=i(e.target,".tree-parent");var n;if(n="expanded",t.classList.toggle(n),this.options.accordion){const n=i(e.target,"ol");Array.from(n.children).filter(e=>e!==t).forEach(e=>(function(e,t){e.classList.remove("expanded")})(e))}}_checkedEvent(e){const t=e.target,n=t.checked,r=t.dataset.treePath.split(".").map(Number);!function e(t){t.children&&t.children.length>0&&t.children.forEach(t=>{t.inputTarget.checked=n,t.inputTarget.indeterminate=!1,e(t)})}(this._getCurrentConfig(r));let i=[...r],c=this;!function e(){if(i.length<=1)return;i.pop();let t=c._getCurrentConfig(i),n=t.children.length,r=t.children.filter(e=>e.inputTarget.checked).length,o=t.children.filter(e=>e.inputTarget.indeterminate).length;t.inputTarget.indeterminate=n>r&&0!==r||o>0,t.inputTarget.checked=n===r,e()}()}_getCurrentConfig(e){let t=this.configs[e[0]];if(1===e.length)return t;for(let n=1;n<e.length;n++)t=t.children[e[n]];return t}_setPath(e,t){return function e(t,n){return t.map((t,r)=>{let i=`${n?n+".":""}${r}`;return Object.assign({},t,{path:i,children:t.children?e(t.children,i):[]})})}(e,t)}_getPath(e){let t=this;return function e(n){return n.map(n=>Object.assign({},n,{inputTarget:t.containerEl.querySelector(`[data-tree-path='${n.path}']`),children:n.children?e(n.children):[]}))}(e)}getChecked(){let e=[];return function t(n){n.forEach(n=>{n.inputTarget.checked&&e.push(n.value),n.children&&t(n.children)})}(this.configs),e}destroy(){var e;return this.containerEl.removeEventListener("click",this._eventBind),(e=this.treeEl)&&e.parentNode&&e.parentNode.removeChild(e),this}}window.Tree=c,t.default=c},,function(e,t,n){}])});